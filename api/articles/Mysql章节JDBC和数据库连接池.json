{"title":"JDBC和数据库连接池","uid":"fb7466e40a0c693c18329664f28f2eb5","slug":"Mysql章节JDBC和数据库连接池","date":"2023-11-23T15:28:20.000Z","updated":"2023-11-25T17:22:24.954Z","comments":true,"path":"api/articles/Mysql章节JDBC和数据库连接池.json","keywords":null,"cover":"../images/封面/章节JDBC和数据库连接池.png","content":"<h1 id=\"Mysql学习笔记\"><a href=\"#Mysql学习笔记\" class=\"headerlink\" title=\"Mysql学习笔记\"></a><strong>Mysql学习笔记</strong></h1><h2 id=\"一、Mysql简要说明\"><a href=\"#一、Mysql简要说明\" class=\"headerlink\" title=\"一、Mysql简要说明\"></a><strong>一、Mysql简要说明</strong></h2><p>使用命令行窗口连接 MYSQL 数据库</p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E4%B8%80%E3%80%81Mysql%E7%AE%80%E8%A6%81%E8%AF%B4%E6%98%8E1.png\"></p>\n<p>操作示意图</p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E4%B8%80%E3%80%81Mysql%E7%AE%80%E8%A6%81%E8%AF%B4%E6%98%8E2.png\"></p>\n<h2 id=\"二、创建数据库\"><a href=\"#二、创建数据库\" class=\"headerlink\" title=\"二、创建数据库\"></a>二、创建数据库</h2><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">\\#使用指令创建数据库</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">CREATE DATABASE hsp_db01;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">\\#删除数据库指令</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">DROP DATABASE hsp_db01</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">\\#创建一个使用 utf8 字符集的 hsp_db02 数据库</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">CREATE DATABASE hsp_db02 CHARACTER SET utf8</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">\\#创建一个使用 utf8 字符集，并带校对规则的 hsp_db03 数据库</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">CREATE DATABASE hsp_db03 CHARACTER SET utf8 COLLATE utf8_bin</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">\\#校对规则 utf8_bin 区分大小 默认 utf8_general_ci 不区分大小写</span></span></code></pre></div><hr>\n<h1 id=\"章节-JDBC-和数据库连接池\"><a href=\"#章节-JDBC-和数据库连接池\" class=\"headerlink\" title=\"章节: JDBC 和数据库连接池\"></a>章节: JDBC 和数据库连接池</h1><h2 id=\"一、JDBC-连接-MySQL准备工作\"><a href=\"#一、JDBC-连接-MySQL准备工作\" class=\"headerlink\" title=\"一、JDBC 连接 MySQL准备工作\"></a><strong>一、JDBC 连接 MySQL准备工作</strong></h2><p>将下载的mysql-connector-java.jar 放入在目录里面的 libs 里面（如果没有就自己创建一个，记得要打包文件）</p>\n<p>右键选中加载到库中</p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E4%B8%80%E3%80%81JDBC%E8%BF%9E%E6%8E%A5MySQL%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C.png\"></p>\n<hr>\n<h2 id=\"二、介绍JDBC\"><a href=\"#二、介绍JDBC\" class=\"headerlink\" title=\"二、介绍JDBC\"></a><strong>二、介绍JDBC</strong></h2><h3 id=\"1、JDBC-的概念\"><a href=\"#1、JDBC-的概念\" class=\"headerlink\" title=\"1、JDBC 的概念\"></a>1、<a href=\"https://so.csdn.net/so/search?q=JDBC&spm=1001.2101.3001.7020\">JDBC</a> 的概念</h3><p> JDBC 是 Java DataBase Connectivity (Java 数据<a href=\"https://so.csdn.net/so/search?q=%E8%BF%9E%E6%8E%A5&spm=1001.2101.3001.7020\">连接</a>)技术的简称，是一种可用于执行 SQL 语句的 Java API。它由一些 java 语言编写的类和接口组成；程序员通过使用 jdbc 可以方便地将 SQL 语句传送给几乎任何一种数据库。</p>\n<h3 id=\"2、JDBC-的功能\"><a href=\"#2、JDBC-的功能\" class=\"headerlink\" title=\"2、JDBC 的功能\"></a>2、JDBC 的功能</h3><p>(1) 与<a href=\"https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BB%BA%E7%AB%8B&spm=1001.2101.3001.7020\">数据库建立</a>连接。<br>(2) 向数据库发送 SQL 语句并执行这些语句。<br>(3) 处理数据返回的结果。</p>\n<h3 id=\"3、JDBC-的常用接口和类\"><a href=\"#3、JDBC-的常用接口和类\" class=\"headerlink\" title=\"3、JDBC 的常用接口和类\"></a>3、JDBC 的常用接口和类</h3><p>(1) Driver 接口:加载驱动程序。<br>(2) DriverManager 类:装人所需的 JDBC 驱动程序，编程时调用它的方法来创建连接。<br>(3) Connection 接口:编程时使用该类对象创建 Statement 对象。<br>(4) Statement 接口:编程时使用该类对象得到 ResultSet 对象。<br>(5) ResultSet 类:负责保存 Statement 执行后所产生的查询结果。</p>\n<hr>\n<h2 id=\"三、连接-MySQL\"><a href=\"#三、连接-MySQL\" class=\"headerlink\" title=\"三、连接 MySQL\"></a><strong>三、连接 MySQL</strong></h2><p>小提示：</p>\n<p>1.mysql驱动5.1.6可以无需CLass.forName(“com.mysql.jdbc.Driver”);</p>\n<p>2.从jkd1.5以后使用jdbc4，不再需要显示调用class.forName()注册驱动而是自动调用驱动jar包下META-INF\\services\\java.sql.Driver文本中的类名称去注册</p>\n<p>3.建议还是写上Class.forName(“com.mysql.cj.jdbc.Driver”),更加明确</p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E4%B8%89%E3%80%81%E8%BF%9E%E6%8E%A5MySQL1.png\"><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E4%B8%89%E3%80%81%E8%BF%9E%E6%8E%A5MySQL2.png\"></p>\n<h3 id=\"1-、注册驱动\"><a href=\"#1-、注册驱动\" class=\"headerlink\" title=\"(1)、注册驱动\"></a>(1)、注册驱动</h3><p>使用反射加载Driver类</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span></span></code></pre></div><h3 id=\"2-、获取连接\"><a href=\"#2-、获取连接\" class=\"headerlink\" title=\"(2)、获取连接\"></a>(2)、获取连接</h3><p>方法一:  DriverManager.getConnection() 传入形参 String url ,Properties info</p>\n<p>方法二:  DriverManager.getConnection() 传入形参 String url ,String user, String password</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\"> Connection com = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/hspeducode&quot;, &quot;root&quot;, &quot;123456&quot;);</span></span></code></pre></div><h3 id=\"3-、获取执行者连接\"><a href=\"#3-、获取执行者连接\" class=\"headerlink\" title=\"(3)、获取执行者连接\"></a>(3)、获取执行者连接</h3><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">Statement stat = com.createStatement();</span></span></code></pre></div><h3 id=\"4-、执行-SQL-语句，并接受结果\"><a href=\"#4-、执行-SQL-语句，并接受结果\" class=\"headerlink\" title=\"(4)、执行 SQL 语句，并接受结果\"></a>(4)、执行 SQL 语句，并接受结果</h3><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">String sql = &quot;SELECT * FROM user&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">ResultSet rs = stat.executeQuery(sql);</span></span></code></pre></div><h3 id=\"5-、处理结果\"><a href=\"#5-、处理结果\" class=\"headerlink\" title=\"(5)、处理结果\"></a>(5)、处理结果</h3><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">while (rs.next())&#123;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">        System.out.println(rs.getInt(&quot;id&quot;) + &quot;\\t&quot; + rs.getString(&quot;name&quot;));</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">&#125;</span></span></code></pre></div><h3 id=\"6-、释放资源\"><a href=\"#6-、释放资源\" class=\"headerlink\" title=\"(6)、释放资源\"></a>(6)、释放资源</h3><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">com.close();</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">stat.close();</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">com.close();</span></span></code></pre></div><h3 id=\"（重要）通过不同方式连接mysql\"><a href=\"#（重要）通过不同方式连接mysql\" class=\"headerlink\" title=\"（重要）通过不同方式连接mysql\"></a><strong>（重要）通过不同方式连接mysql</strong></h3><h4 id=\"方式一：映射之后连接mysql\"><a href=\"#方式一：映射之后连接mysql\" class=\"headerlink\" title=\"方式一：映射之后连接mysql\"></a><strong>方式一：</strong>映射之后连接mysql</h4><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">connect01</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws ClassNotFoundException</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> SQLException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Class</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">forName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">com.mysql.cj.jdbc.Driver</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//创建url和user和password</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> url </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">jdbc:mysql://localhost:3306/hspeducode</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">root</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> password </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">20031214gr</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> DriverManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">url</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> password</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">方式一: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"方式二：通过读取配置文件来连接mysql\"><a href=\"#方式二：通过读取配置文件来连接mysql\" class=\"headerlink\" title=\"方式二：通过读取配置文件来连接mysql\"></a><strong>方式二：</strong>通过读取配置文件来连接mysql</h4><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E4%B8%89%E3%80%81%E8%BF%9E%E6%8E%A5MySQL3.png\"></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">connect02</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws IOException</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ClassNotFoundException</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> SQLException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//通过Properties对象获取配置文件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Properties</span><span style=\"color: #BABED8\"> properties </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Properties</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">load</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">FileInputStream</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">src</span><span style=\"color: #BABED8\">\\\\</span><span style=\"color: #C3E88D\">mysql.properties</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//获取相关的值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> password </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">password</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> url </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">url</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> driver </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">driver</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Class</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">forName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">driver</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #464B5D; font-style: italic\">//建议写上</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> DriverManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">url</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> password</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">方式二: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><hr>\n<h2 id=\"四、ResultSet-结果集\"><a href=\"#四、ResultSet-结果集\" class=\"headerlink\" title=\"四、ResultSet[结果集]\"></a><strong>四、ResultSet[结果集]</strong></h2><h3 id=\"1-基本介绍\"><a href=\"#1-基本介绍\" class=\"headerlink\" title=\"1.基本介绍\"></a><strong>1.基本介绍</strong></h3><p>1.表示数据库结果集的数据库，通常通过执行查询数据库的语句生成</p>\n<p>2.ResultSet对象保持一个光标指向其当前的数据行。最初，光标位于第一行之前</p>\n<p>3.next方法将光标移动到下一行，并且由于在ResultSet对象中没有更多行时返回false，因此可以在while循环中使用循环来遍历结果集</p>\n<h3 id=\"2-ResultSet图像说明\"><a href=\"#2-ResultSet图像说明\" class=\"headerlink\" title=\"2.ResultSet图像说明\"></a><strong>2.ResultSet图像说明</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%9B%9B%E3%80%81ResultSet%5B%E7%BB%93%E6%9E%9C%E9%9B%86%5D1.png\"></p>\n<h3 id=\"3-ResultSet底层\"><a href=\"#3-ResultSet底层\" class=\"headerlink\" title=\"3.ResultSet底层\"></a><strong>3.ResultSet底层</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%9B%9B%E3%80%81ResultSet%5B%E7%BB%93%E6%9E%9C%E9%9B%86%5D2.png\"></p>\n<h3 id=\"4-代码举例演示\"><a href=\"#4-代码举例演示\" class=\"headerlink\" title=\"4.代码举例演示\"></a><strong>4.代码举例演示</strong></h3><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\"> args</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> throws ClassNotFoundException</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> SQLException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//1. 加载驱动</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Class</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">forName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">com.mysql.cj.jdbc.Driver</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//创建url和user和password</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> url </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">jdbc:mysql://localhost:3306/hspeducode</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">root</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> password </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">20031214gr</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//2. 得到连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> DriverManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">url</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> password</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//3. 得到Statement</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Statement</span><span style=\"color: #BABED8\"> statement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">createStatement</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//4. 组织sql</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">select id, name, sex, borndate, phone from actor</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//执行给定的SQL语句,该语句返回单个ResultSet对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">ResultSet</span><span style=\"color: #BABED8\"> resultSet </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> statement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeQuery</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//5. 使用while取出数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">while</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">next</span><span style=\"color: #89DDFF\">())</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//让光标向下移动,如果没有更多信息,返回false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> id </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getInt</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//获取该行的第1列</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//获取该行第2列</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sex </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//获取该行第3列</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">Date</span><span style=\"color: #BABED8\"> borndate </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getDate</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//获取该行第4列</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> phone </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//获取该行第5列</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">id </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\t</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\t</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> sex </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\t</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> borndate </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\t</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> phone</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//6. 关闭连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        statement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>​\t\t输出演示</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">1\t周星驰\t男\t1970-11-11\t110</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">2\t刘德华\t男\t1970-11-11\t110</span></span></code></pre></div><hr>\n<h2 id=\"五、Statement接口\"><a href=\"#五、Statement接口\" class=\"headerlink\" title=\"五、Statement接口\"></a><strong>五、Statement接口</strong></h2><h3 id=\"1-基本介绍-1\"><a href=\"#1-基本介绍-1\" class=\"headerlink\" title=\"1.基本介绍\"></a><strong>1.基本介绍</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E4%BA%94%E3%80%81Statement%E6%8E%A5%E5%8F%A31.png\"></p>\n<h3 id=\"2-sql注入\"><a href=\"#2-sql注入\" class=\"headerlink\" title=\"2.sql注入\"></a><strong>2.sql注入</strong></h3><p>​\t\t<strong>前置准备</strong></p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">-- 创建一张表</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">CREATE TABLE admin ( -- 管理员表</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">NAME VARCHAR(32) NOT NULL UNIQUE, </span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">pwd VARCHAR(32) NOT NULL DEFAULT &#39;&#39;) CHARACTER SET utf8; </span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">-- 添加数据</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">INSERT INTO admin VALUES(&#39;tom&#39;, &#39;123&#39;);</span></span></code></pre></div><p>​\t\t<strong>正常查询</strong></p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">SELECT *</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">FROM admin</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">WHERE NAME = &#39;tom&#39; AND pwd = &#39;123&#39;</span></span></code></pre></div><p>​\t\t<strong>SQL注入</strong></p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">-- 输入用户名 为 1&#39; or</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">-- 输入万能密码 为 or &#39;1&#39;= &#39;1</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">SELECT *</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">FROM admin</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">WHERE NAME = &#39;1&#39; OR&#39; AND pwd = &#39;OR &#39;1&#39;= &#39;1&#39; </span></span>\n<span class=\"line\"><span style=\"color: #babed8\">-- &#39;1&#39; = &#39;1&#39;一定成立,因此有隐患</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">SELECT * FROM admin</span></span></code></pre></div><h3 id=\"3-代码举例演示sql注入\"><a href=\"#3-代码举例演示sql注入\" class=\"headerlink\" title=\"3.代码举例演示sql注入\"></a><strong>3.代码举例演示sql注入</strong></h3><p>​\t\t代码内容演示</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\"> args</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> throws ClassNotFoundException</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> SQLException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Scanner</span><span style=\"color: #BABED8\"> scanner </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Scanner</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">in</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//next(): 当接收到 空格 或者 &#39; 就是表示结束</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//nextLine(): 接受到 回车 表示结束</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">请输入管理员的名字: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> admin_name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> scanner</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">nextLine</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//如果希望看到sql注入,需要使用nextline方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">请输入管理员的密码: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> admin_pws </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> scanner</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">nextLine</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 加载驱动</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Class</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">forName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">com.mysql.cj.jdbc.Driver</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//创建url和user和password</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> url </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">jdbc:mysql://localhost:3306/hspeducode</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">root</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> password </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">20031214gr</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 得到连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> DriverManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">url</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> password</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 得到Statement</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Statement</span><span style=\"color: #BABED8\"> statement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">createStatement</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//4. 组织sql</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">select name, pwd from admin where name = &#39;</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> admin_name </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">&#39; and pwd = &#39;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">admin_pws</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">&#39;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//执行给定的SQL语句,该语句返回单个ResultSet对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">ResultSet</span><span style=\"color: #BABED8\"> resultSet </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> statement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeQuery</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//5.查询表</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">next</span><span style=\"color: #89DDFF\">())</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">恭喜,登陆成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">抱歉,登录失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//6. 关闭连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    statement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>​\t\t演示sql注入的结果</p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E4%BA%94%E3%80%81Statement%E6%8E%A5%E5%8F%A32.png\"></p>\n<hr>\n<h2 id=\"六、PreparedStatement接口-预处理\"><a href=\"#六、PreparedStatement接口-预处理\" class=\"headerlink\" title=\"六、PreparedStatement接口[预处理]\"></a><strong>六、PreparedStatement接口[预处理]</strong></h2><h3 id=\"1-基本介绍-2\"><a href=\"#1-基本介绍-2\" class=\"headerlink\" title=\"1.基本介绍\"></a><strong>1.基本介绍</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%85%AD%E3%80%81PreparedStatement%E6%8E%A5%E5%8F%A3%5B%E9%A2%84%E5%A4%84%E7%90%86%5D1.png\"></p>\n<p>​\t\tsql语句编写</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">String sql = &quot;SELECT COUNT(*) FROM admin WHERE username =? AND PASSWORD =?&quot;</span></span></code></pre></div><h3 id=\"2-预处理的好处\"><a href=\"#2-预处理的好处\" class=\"headerlink\" title=\"2.预处理的好处\"></a><strong>2.预处理的好处</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%85%AD%E3%80%81PreparedStatement%E6%8E%A5%E5%8F%A3%5B%E9%A2%84%E5%A4%84%E7%90%86%5D2.png\"> </p>\n<h3 id=\"3-代码举例演示预处理\"><a href=\"#3-代码举例演示预处理\" class=\"headerlink\" title=\"3.代码举例演示预处理\"></a><strong>3.代码举例演示预处理</strong></h3><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\"> args</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> throws ClassNotFoundException</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> SQLException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Scanner</span><span style=\"color: #BABED8\"> scanner </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Scanner</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">in</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//next(): 当接收到 空格 或者 &#39; 就是表示结束</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//nextLine(): 接受到 回车 表示结束</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">请输入管理员的名字: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> admin_name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> scanner</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">nextLine</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//如果希望看到sql注入,需要使用nextline方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">请输入管理员的密码: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> admin_pws </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> scanner</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">nextLine</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 加载驱动</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Class</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">forName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">com.mysql.cj.jdbc.Driver</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//创建url和user和password</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> url </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">jdbc:mysql://localhost:3306/hspeducode</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">root</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> password </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">20031214gr</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 得到连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> DriverManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">url</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> password</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 得到PreparedStatement</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3.1 组织sql,sql语句的 ?相当于占位符</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">select name, pwd from admin where name =? and pwd =?</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3.2 preparedStatement对象实现了PreparedStatement接口的实现类的对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">PreparedStatement</span><span style=\"color: #BABED8\"> preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3.3 给?赋值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> admin_name</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> admin_pws</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//4. 执行select语句使用 executeQuery</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//   如果执行的是 dml语句(update, insert, delete) executeUpdate()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//   这里执行executeQuery不用再写sql语句,因为已经被PreparedStatement处理过了</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//\t 除非sql语句不含?,才可以写在executeQuery里面</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">ResultSet</span><span style=\"color: #BABED8\"> resultSet </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeQuery</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//5. 查询表</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">next</span><span style=\"color: #89DDFF\">())</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">恭喜,登陆成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">抱歉,登录失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//6. 关闭连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>​\t\t演示sql注入的结果</p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%85%AD%E3%80%81PreparedStatement%E6%8E%A5%E5%8F%A3%5B%E9%A2%84%E5%A4%84%E7%90%86%5D3.png\"></p>\n<h3 id=\"4-演示使用DML语句\"><a href=\"#4-演示使用DML语句\" class=\"headerlink\" title=\"4.演示使用DML语句\"></a><strong>4.演示使用DML语句</strong></h3><p>DML语句(update, insert, delete)使用  executeUpdate()</p>\n<p>select语句使用 executeQuery()</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\"> args</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> throws Exception </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//看 PreparedStatement 类图</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Scanner</span><span style=\"color: #BABED8\"> scanner </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Scanner</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">in</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//让用户输入管理员名和密码</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">请输删除管理员的名字: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//next(): 当接收到 空格或者 &#39;就是表示结束</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> admin_name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> scanner</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">nextLine</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">// 老师说明，如果希望看到 SQL 注入，这里需要用 nextLine</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">// System.out.print(&quot;请输入管理员的新密码: &quot;);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">// String admin_pwd = scanner.nextLine();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//通过 Properties 对象获取配置文件的信息</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Properties</span><span style=\"color: #BABED8\"> properties </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Properties</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">load</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">FileInputStream</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">javacode</span><span style=\"color: #BABED8\">\\\\</span><span style=\"color: #C3E88D\">src</span><span style=\"color: #BABED8\">\\\\</span><span style=\"color: #C3E88D\">mysql.properties</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//获取相关的值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> password </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">password</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> driver </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">driver</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> url </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">url</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 注册驱动</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Class</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">forName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">driver</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #464B5D; font-style: italic\">//建议写上</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 得到连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> DriverManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">url</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> password</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">***</span><span style=\"color: #BABED8\">主要部分</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 得到 PreparedStatement</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3.1 组织 SqL , Sql 语句的 ? 就相当于占位符</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//添加记录</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//String sql = &quot;insert into admin values(?, ?)&quot;;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//String sql = &quot;update admin set pwd = ? where name = ?&quot;; 此刻 setString(1, admin_p)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">delete from admin where name = ?</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3.2 preparedStatement 对象实现了 PreparedStatement 接口的实现类的对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">PreparedStatement</span><span style=\"color: #BABED8\"> preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3.3 给 ? 赋值 此处要对应?赋正确的值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> admin_name</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//preparedStatement.setString(2, admin_name);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//4. 执行 dml 语句使用 executeUpdate</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> rows </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeUpdate</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">rows </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">?</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">***</span><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//关闭连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><hr>\n<h2 id=\"七、例题练习\"><a href=\"#七、例题练习\" class=\"headerlink\" title=\"七、例题练习\"></a><strong>七、例题练习</strong></h2><h3 id=\"1、题目要求\"><a href=\"#1、题目要求\" class=\"headerlink\" title=\"1、题目要求\"></a><strong>1、题目要求</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E4%B8%83%E3%80%81%E4%BE%8B%E9%A2%98%E7%BB%83%E4%B9%A01.png\"></p>\n<h3 id=\"2、问题解析\"><a href=\"#2、问题解析\" class=\"headerlink\" title=\"2、问题解析\"></a><strong>2、问题解析</strong></h3><h4 id=\"2-使用PreparedStatement添加5条数据\"><a href=\"#2-使用PreparedStatement添加5条数据\" class=\"headerlink\" title=\"2.使用PreparedStatement添加5条数据\"></a>2.使用PreparedStatement添加5条数据</h4><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">PreparedStatementwork1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">args</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">throws</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">ClassNotFoundException</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Scanner</span><span style=\"color: #BABED8\"> scanner </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Scanner</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">in</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//next(): 当接收到 空格 或者 &#39; 就是表示结束</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//nextLine(): 接受到 回车 表示结束</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">请输入管理员的名字: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> admin_name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> scanner</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">nextLine</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//如果希望看到sql注入,需要使用nextline方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">请输入管理员的密码: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> admin_pws </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> scanner</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">nextLine</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//1. 加载驱动</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Class</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">forName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">com.mysql.cj.jdbc.Driver</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> url </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">jdbc:mysql://localhost:3306/hspeducode</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">root</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> password </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">20031214gr</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//2. 得到连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> DriverManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">url</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> password</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//3. 得到PreparedStatement</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//3.1 设置sql语句</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">insert into admin values(?, ?)</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//3.2 preparedStatement 对象实现了 PreparedStatement 接口的实现类的对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">PreparedStatement</span><span style=\"color: #BABED8\"> preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//3.3 给 ? 赋值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> admin_name</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> admin_pws</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//4. 执行dml 语句使用 executeUpdate</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> rows </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeUpdate</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">rows </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">?</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//关闭连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"3-修改tom的记录-将username改成-king\"><a href=\"#3-修改tom的记录-将username改成-king\" class=\"headerlink\" title=\"3.修改tom的记录, 将username改成 king\"></a>3.修改tom的记录, 将username改成 king</h4><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//3. 得到PreparedStatement</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//3.1 设置sql语句</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">update admin set name = &#39;king&#39; where name =? </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//3.2 preparedStatement 对象实现了 PreparedStatement 接口的实现类的对象</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">PreparedStatement</span><span style=\"color: #BABED8\"> preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//3.3 给 ? 赋值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> admin_name</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//4. 执行dml 语句使用 executeUpdate</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> rows </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeUpdate</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">rows </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">?</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span></code></pre></div><h4 id=\"4-删除-一条-记录\"><a href=\"#4-删除-一条-记录\" class=\"headerlink\" title=\"4.删除 一条 记录\"></a>4.删除 一条 记录</h4><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//3. 得到PreparedStatement</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//3.1 设置sql语句</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">delete from admin where name = ?</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//3.2 preparedStatement 对象实现了 PreparedStatement 接口的实现类的对象</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">PreparedStatement</span><span style=\"color: #BABED8\"> preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//3.3 给 ? 赋值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> admin_name</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//4. 执行dml 语句使用 executeUpdate</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> rows </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeUpdate</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">rows </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">?</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span></code></pre></div><h4 id=\"5-查询全部记录，并显示在控制台\"><a href=\"#5-查询全部记录，并显示在控制台\" class=\"headerlink\" title=\"5.查询全部记录，并显示在控制台\"></a><strong>5.查询全部记录，并显示在控制台</strong></h4><p>使用select语句应该用executeQuery方法, 并且用ResultSet结果集接收, 在末尾要关闭ResultSet</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//3. 得到PreparedStatement</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//3.1 设置sql语句</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">select * from admin</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//3.2 preparedStatement 对象实现了 PreparedStatement 接口的实现类的对象</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">PreparedStatement</span><span style=\"color: #BABED8\"> preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//4. 执行select 语句使用 executeQuery</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">ResultSet</span><span style=\"color: #BABED8\"> resultSet </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeQuery</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//5. 使用while取出数据</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">while</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">next</span><span style=\"color: #89DDFF\">())</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//让光标向下移动</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> pwd </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">name </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\t</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> pwd</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//关闭连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span></code></pre></div><hr>\n<h2 id=\"八、JDBC的API小结\"><a href=\"#八、JDBC的API小结\" class=\"headerlink\" title=\"八、JDBC的API小结\"></a><strong>八、JDBC的API小结</strong></h2><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%85%AB%E3%80%81JDBC%E7%9A%84API%E5%B0%8F%E7%BB%931.png\"></p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%85%AB%E3%80%81JDBC%E7%9A%84API%E5%B0%8F%E7%BB%932.png\"></p>\n<hr>\n<h2 id=\"九、封装-JDBC-关闭连接-得到连接\"><a href=\"#九、封装-JDBC-关闭连接-得到连接\" class=\"headerlink\" title=\"九、封装 JDBC[关闭连接,得到连接]\"></a><strong>九、封装 JDBC[关闭连接,得到连接]</strong></h2><h3 id=\"1-封装JDBCUtils-关闭连接-得到连接\"><a href=\"#1-封装JDBCUtils-关闭连接-得到连接\" class=\"headerlink\" title=\"1.封装JDBCUtils[关闭连接, 得到连接]\"></a><strong>1.封装JDBCUtils[关闭连接, 得到连接]</strong></h3><p>说明：在JDBC操作中，获取连接 和 释放资源 是经常使用到的，可以将其封装JDBC连接到的工具类 JDBCUtils</p>\n<p><strong>JDBCUtils代码：</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F78C6C\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">JDBC</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">utils</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">io</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">FileInputStream</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">io</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">IOException</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">sql</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">*</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">util</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">Properties</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\"> * 这是一个工具类,完成mysql的连接和关闭资源</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">JDBCUtils</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//定义相关属性(4个),只需要一份,做成static</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//用户名</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> password</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//密码</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> url</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//url</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> driver</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//驱动名</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//在static代码块去初始化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">Properties</span><span style=\"color: #BABED8\"> properties </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Properties</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">load</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">FileInputStream</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">src</span><span style=\"color: #BABED8\">\\\\</span><span style=\"color: #C3E88D\">mysql.properties</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">            </span><span style=\"color: #464B5D; font-style: italic\">//获取相关的属性值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            user </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            password </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">password</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            url </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">url</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            driver </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">driver</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">IOException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//连接数据库,返回Connection</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> DriverManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">url</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> password</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//关闭相关资源</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #464B5D; font-style: italic\">/*</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">        1. ResultSet 结果集</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">        2. Statement 或者 PreparedStatement</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">        3. Connection</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">        4. 如果关闭资源,就传入对象,否则传入null</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">ResultSet</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">set</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Statement</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">statement</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">connection</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//判断是否为null</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">set </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                set</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">statement </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                statement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">connection </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h3 id=\"2-演示如何使用JDBCUtils类\"><a href=\"#2-演示如何使用JDBCUtils类\" class=\"headerlink\" title=\"2.演示如何使用JDBCUtils类\"></a><strong>2.演示如何使用JDBCUtils类</strong></h3><h4 id=\"1、使用JDBCUtils执行DML语句\"><a href=\"#1、使用JDBCUtils执行DML语句\" class=\"headerlink\" title=\"1、使用JDBCUtils执行DML语句\"></a>1、使用JDBCUtils执行DML语句</h4><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testDML</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//insert, update, delete</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 得到连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 组织一个sql</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">update actor set name = ? where id = ?</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 创建一个PreparedStatement 对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">PreparedStatement</span><span style=\"color: #BABED8\"> preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//为了在finally关闭资源,扩大作用域</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//给占位符赋值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">蘑菇</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setInt</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//执行sql语句 update属于 dml语句</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeUpdate</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">finally</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//关闭资源</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"2、使用JDBCUtils执行select语句\"><a href=\"#2、使用JDBCUtils执行select语句\" class=\"headerlink\" title=\"2、使用JDBCUtils执行select语句\"></a>2、使用JDBCUtils执行select语句</h4><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testSelect</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 得到连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 组织一个sql语句</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">select * from actor</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 创建一个PreparedStament 对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">PreparedStatement</span><span style=\"color: #BABED8\"> preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">ResultSet</span><span style=\"color: #BABED8\"> resultSet </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//执行sql语句返回一个ResultSet结果集</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        resultSet </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeQuery</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//通过while循环取出resultSet</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">while</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">next</span><span style=\"color: #89DDFF\">())</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> id </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getInt</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sex </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">Date</span><span style=\"color: #BABED8\"> borndate </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getDate</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> phone </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">id </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\t</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\t</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> sex </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\t</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> borndate </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\t</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> phone</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">finally</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">resultSet</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><hr>\n<h2 id=\"十、事务\"><a href=\"#十、事务\" class=\"headerlink\" title=\"十、事务\"></a><strong>十、事务</strong></h2><h3 id=\"1-简要说明\"><a href=\"#1-简要说明\" class=\"headerlink\" title=\"1.简要说明\"></a><strong>1.简要说明</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E3%80%81%E4%BA%8B%E5%8A%A11.png\"></p>\n<h3 id=\"2-应用实例-模拟经典的转账业务\"><a href=\"#2-应用实例-模拟经典的转账业务\" class=\"headerlink\" title=\"2.应用实例: 模拟经典的转账业务\"></a><strong>2.应用实例: 模拟经典的转账业务</strong></h3><h4 id=\"1-模拟数据库\"><a href=\"#1-模拟数据库\" class=\"headerlink\" title=\"1.模拟数据库\"></a>1.模拟数据库</h4><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">-- 创建案例表</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">create table account(</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    id int primary key auto_increment,</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    name varchar(32) not null default &#39;&#39;,</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    balance double not null default 0)</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    character set utf8;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">-- 插入数据</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">insert into account values(null, &#39;马云&#39;, 3000);</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">insert into account values(null, &#39;马化腾&#39;, 10000);</span></span></code></pre></div><h4 id=\"2-不使用事务可能出现的问题模拟\"><a href=\"#2-不使用事务可能出现的问题模拟\" class=\"headerlink\" title=\"2.不使用事务可能出现的问题模拟\"></a>2.不使用事务可能出现的问题模拟</h4><p>​\t在默认情况下,connection会自动提交。当执行到 int i &#x3D; 1&#x2F;0的时候,抛出异常,则不会继续执行try块后面的内容,就会使甲方转出了钱，但是乙方没有收到钱，这显然是不合理的，因此需要使用事务处理。</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">noTransaction</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 得到连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 组织一个sql</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">update account set balance = balance - 100 where id = 1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql2 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">update account set balance = balance + 100 where id = 2</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 创建一个PreparedStatement 对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">PreparedStatement</span><span style=\"color: #BABED8\"> preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//在默认情况下,connection会自动提交</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//执行sql语句</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeUpdate</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">/</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//抛出异常</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//执行sql2语句</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql2</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeUpdate</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">finally</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"3-使用事务解决上述问题\"><a href=\"#3-使用事务解决上述问题\" class=\"headerlink\" title=\"3.使用事务解决上述问题\"></a>3.使用事务解决上述问题</h4><p>​\t首先，先将connection设置为不自动提交，当设置后就表示开启了事务。如果发生异常就要回滚，所以在catch块中设置connection.rollback() 该方法默认回滚到事务开始的地方。在语句全部执行完后才提交事务connection.commit()。</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">userTransaction</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 得到连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 组织一个sql</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">update account set balance = balance - 100 where id = 1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql2 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">update account set balance = balance + 100 where id = 2</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 创建一个PreparedStatement 对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">PreparedStatement</span><span style=\"color: #BABED8\"> preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//将connection设置为不自动提交</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setAutoCommit</span><span style=\"color: #89DDFF\">(false);</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//开启了事务</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//执行sql语句</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeUpdate</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//int i = 1/0; //抛出异常</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//执行sql2语句</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql2</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeUpdate</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//提交事务</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">commit</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//在这里进行回滚，即撤销执行sql</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行发生了异常,撤销执行的sql语句</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">rollback</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//默认回滚到事务开始的地方</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">ex</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ex</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        e</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">printStackTrace</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">finally</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><hr>\n<h2 id=\"十一、批处理\"><a href=\"#十一、批处理\" class=\"headerlink\" title=\"十一、批处理\"></a><strong>十一、批处理</strong></h2><h3 id=\"1-基本介绍-3\"><a href=\"#1-基本介绍-3\" class=\"headerlink\" title=\"1.基本介绍\"></a><strong>1.基本介绍</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%B8%80%E3%80%81%E6%89%B9%E5%A4%84%E7%90%861.png\"></p>\n<h3 id=\"2-批处理底层\"><a href=\"#2-批处理底层\" class=\"headerlink\" title=\"2.批处理底层\"></a><strong>2.批处理底层</strong></h3><p>实际上是一个集合存储sql语句，满了之后扩容。  |  扩容之后如下。</p>\n<p><img src=\"../images/mysql/章节JDBC和数据库连接池/十一、批处理2.png\" style=\"zoom:50%;\" /><img src=\"../images/mysql/章节JDBC和数据库连接池/十一、批处理3.png\" style=\"zoom: 50%;\" /></p>\n<h3 id=\"3-源码分析\"><a href=\"#3-源码分析\" class=\"headerlink\" title=\"3.源码分析\"></a><strong>3.源码分析</strong></h3><p>将 sql 语句加入到批处理包中 -&gt; 看源码</p>\n<p><strong>1、第一就创建 ArrayList - elementData &#x3D;&gt; Object[]</strong></p>\n<p><strong>2、elementData &#x3D;&gt; Object[] 就会存放我们预处理的 sql 语句</strong></p>\n<p><strong>3、当 elementData 满后,就按照 1.5 倍扩容</strong></p>\n<p><strong>4、当添加到指定的值后，就 executeBatch</strong></p>\n<p><strong>5、批量处理会减少我们发送 sql 语句的网络开销，而且减少编译次数，因此效率提高</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">addBatch</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws SQLException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">synchronized</span><span style=\"color: #89DDFF\">(this.</span><span style=\"color: #82AAFF\">checkClosed</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">getConnectionMutex</span><span style=\"color: #89DDFF\">())</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(this.</span><span style=\"color: #BABED8\">batchedArgs </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">batchedArgs </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">ArrayList</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">parameterValues</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">length</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #82AAFF\">checkAllParametersSet</span><span style=\"color: #89DDFF\">(this.</span><span style=\"color: #BABED8\">parameterValues</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">parameterStreams</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">batchedArgs</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> PreparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">BatchParams</span><span style=\"color: #89DDFF\">(this.</span><span style=\"color: #BABED8\">parameterValues</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">parameterStreams</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">isStream</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">streamLengths</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">isNull</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h3 id=\"4-使用批处理\"><a href=\"#4-使用批处理\" class=\"headerlink\" title=\"4.使用批处理\"></a><strong>4.使用批处理</strong></h3><p>一定要在url中加入参数 <strong>?rewriteBatchedStatements&#x3D;true</strong></p>\n<p>配置文件内容:</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">user=root</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">password=20031214gr</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">url=jdbc:mysql://localhost:3306/hspeducode?rewriteBatchedStatements=true</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">driver=com.mysql.cj.jdbc.Driver</span></span></code></pre></div><p>代码实现批处理操作sql语句</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">batch</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws SQLException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">insert into admin2 values(null, ?, ?)</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">PreparedStatement</span><span style=\"color: #BABED8\"> preparedStatement </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepareStatement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sql</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">开始执行</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">long</span><span style=\"color: #BABED8\"> start </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentTimeMillis</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//开始时间</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5000</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">jack</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">123</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//将sql语句加入到批处理包中</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">addBatch</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//当有1000条时，再批量执行</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">((</span><span style=\"color: #BABED8\">i </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">%</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1000</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">executeBatch</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">            </span><span style=\"color: #464B5D; font-style: italic\">//清空语句</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            preparedStatement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">clearBatch</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">long</span><span style=\"color: #BABED8\"> end </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentTimeMillis</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//结束时间</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">批量处理 耗时时间: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">end </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> start</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//关闭连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> preparedStatement</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><hr>\n<h2 id=\"十二、数据库连接池\"><a href=\"#十二、数据库连接池\" class=\"headerlink\" title=\"十二、数据库连接池\"></a><strong>十二、数据库连接池</strong></h2><h3 id=\"1-提出问题\"><a href=\"#1-提出问题\" class=\"headerlink\" title=\"1.提出问题\"></a><strong>1.提出问题</strong></h3><p>问题：java程序频繁的连接数据库，需要得到多次连接</p>\n<p><strong>传统连接数据库</strong>：</p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A011.png\"></p>\n<p><strong>多次连接数据库：</strong></p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A012.png\"></p>\n<p><strong>传统方式连接mysql5000次代码模拟</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//连接 mysql 5000 次</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testCon</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//看看连接-关闭 connection 会耗用多久</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">long</span><span style=\"color: #BABED8\"> start </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentTimeMillis</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">开始连接.....</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5000</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//使用传统的 jdbc 方式，得到连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//做一些工作，比如得到 PreparedStatement ，发送 sql</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//.......... //关闭</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        JDBCUtils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">long</span><span style=\"color: #BABED8\"> end </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentTimeMillis</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">传统方式 5000 次 耗时=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">end </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> start</span><span style=\"color: #89DDFF\">));</span><span style=\"color: #464B5D; font-style: italic\">//传统方式 5000 次 耗时=7099</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span></code></pre></div><h3 id=\"2-传统获取Connection问题分析\"><a href=\"#2-传统获取Connection问题分析\" class=\"headerlink\" title=\"2.传统获取Connection问题分析\"></a><strong>2.传统获取Connection问题分析</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A02.png\"></p>\n<h3 id=\"3-数据库连接池基本介绍\"><a href=\"#3-数据库连接池基本介绍\" class=\"headerlink\" title=\"3.数据库连接池基本介绍\"></a><strong>3.数据库连接池基本介绍</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A031.png\"></p>\n<h3 id=\"4-数据库连接池示意图\"><a href=\"#4-数据库连接池示意图\" class=\"headerlink\" title=\"4.数据库连接池示意图\"></a><strong>4.数据库连接池示意图</strong></h3><p>1、当连接被占用时进入等待队列，等待连接可用。如果连接没有被占用，则可以直接获得连接，不需要等待。</p>\n<p>2、<strong>放回连接池是指把连接的引用断开，连接对象任然还在。</strong></p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A04.png\"></p>\n<h3 id=\"5-数据库连接池的种类\"><a href=\"#5-数据库连接池的种类\" class=\"headerlink\" title=\"5.数据库连接池的种类\"></a><strong>5.数据库连接池的种类</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A05.png\"></p>\n<hr>\n<h3 id=\"C3P0数据库连接池\"><a href=\"#C3P0数据库连接池\" class=\"headerlink\" title=\"C3P0数据库连接池\"></a><strong>C3P0数据库连接池</strong></h3><h4 id=\"1-使用C3P0数据库连接池的准备工作\"><a href=\"#1-使用C3P0数据库连接池的准备工作\" class=\"headerlink\" title=\"1.使用C3P0数据库连接池的准备工作\"></a>1.使用C3P0数据库连接池的准备工作</h4><p>添加jar包并且添加到库里。</p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0_C3P0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A01.png\"><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0_C3P0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A02.png\"></p>\n<h4 id=\"2-使用C3P0数据库连接池-代码实现\"><a href=\"#2-使用C3P0数据库连接池-代码实现\" class=\"headerlink\" title=\"2.使用C3P0数据库连接池(代码实现)\"></a>2.使用C3P0数据库连接池(代码实现)</h4><h5 id=\"方式一-在程序中指定user-url-password等\"><a href=\"#方式一-在程序中指定user-url-password等\" class=\"headerlink\" title=\"方式一: 在程序中指定user, url, password等\"></a>方式一: 在程序中指定user, url, password等</h5><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//方式一: 相关参数，在程序中指定user, url, password等</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testC3P0_01</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws Exception </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 创建一个数据源对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">ComboPooledDataSource</span><span style=\"color: #BABED8\"> comboPooledDataSource </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">ComboPooledDataSource</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 通过配置文件(mysql.properties)获取相关连接的信息</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Properties</span><span style=\"color: #BABED8\"> properties </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Properties</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">load</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">FileInputStream</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">src</span><span style=\"color: #BABED8\">\\\\</span><span style=\"color: #C3E88D\">mysql.properties</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//读取相关属性值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> password </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">password</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> url </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">url</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> diver </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getProperty</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">diver</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//给数据源 comboPooledDataSource 设置相关参数</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//注意: 连接管理是由 comboPooledDataSource 来管理</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    comboPooledDataSource</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setDriverClass</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">diver</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    comboPooledDataSource</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setJdbcUrl</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">url</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    comboPooledDataSource</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setUser</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    comboPooledDataSource</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setPassword</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">password</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//设置初始化连接数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    comboPooledDataSource</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setInitialPoolSize</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//设置最大连接数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    comboPooledDataSource</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setMaxPoolSize</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">50</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//测试连接池的效率、测试对mysql 5000次操作</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">long</span><span style=\"color: #BABED8\"> start </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentTimeMillis</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//开始时间</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5000</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//得到连接池的连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> comboPooledDataSource</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//从DataSource接口实现的连接</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//System.out.println(&quot;连接成功&quot;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">long</span><span style=\"color: #BABED8\"> end </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentTimeMillis</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//结束时间</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">C3P0 5000次连接mysql耗时: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">end</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> start</span><span style=\"color: #89DDFF\">));</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//C3P0 5000次连接mysql耗时: 509</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"方式二-使用配置文件模板来完成\"><a href=\"#方式二-使用配置文件模板来完成\" class=\"headerlink\" title=\"方式二: 使用配置文件模板来完成\"></a>方式二: 使用配置文件模板来完成</h5><p>1、将C3P0提供的<img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0_C3P0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A03.png\">c3p0.config.xml文件拷贝到src目录下</p>\n<p>2、该文件指定了连接数据库和连接池的相关参数</p>\n<p>3、在xml中配置好参数</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//方式二: 使用配置文件模板来完成</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//1. 将c3p0提供的c3p0.config.xml拷贝到src目录下</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//2. 该文件指定了连接数据库和连接池的相关参数</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testC3P0_02</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws SQLException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">ComboPooledDataSource</span><span style=\"color: #BABED8\"> comboPooledDataSource </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">ComboPooledDataSource</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">hsp_edu</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">long</span><span style=\"color: #BABED8\"> start </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentTimeMillis</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//开始时间</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//测试5000次连接mysql</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5000</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//直接连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> comboPooledDataSource</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//System.out.println(&quot;连接成功&quot;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">long</span><span style=\"color: #BABED8\"> end </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentTimeMillis</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//结束时间</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">C3P0方式二 5000次连接mysql耗时: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">end </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">start</span><span style=\"color: #89DDFF\">));</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//C3P0方式二 5000次连接mysql耗时: 461</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><hr>\n<h3 id=\"Druid-德鲁伊-数据库连接池\"><a href=\"#Druid-德鲁伊-数据库连接池\" class=\"headerlink\" title=\"Druid(德鲁伊)数据库连接池\"></a><strong>Druid(德鲁伊)数据库连接池</strong></h3><h4 id=\"1-使用Druid数据库连接池的准备工作\"><a href=\"#1-使用Druid数据库连接池的准备工作\" class=\"headerlink\" title=\"1.使用Druid数据库连接池的准备工作\"></a>1.使用Druid数据库连接池的准备工作</h4><p>1.添加jar包并且添加到库里。 加入配置文件<img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0_Druid1.png\">druid.properties文件到src目录下<img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0_Druid2.png\"></p>\n<p>2.配置druid.properties的参数</p>\n<h4 id=\"2-使用Druid数据库连接池-代码实现\"><a href=\"#2-使用Druid数据库连接池-代码实现\" class=\"headerlink\" title=\"2.使用Druid数据库连接池(代码实现)\"></a><strong>2.使用Druid数据库连接池(代码实现)</strong></h4><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testDruid</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws Exception </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 加入Druid jar包</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 加入配置文件 druid.properties, 将该文件拷贝项目的src目录</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 创建Properties对象,读取配置文件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Properties</span><span style=\"color: #BABED8\"> properties </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Properties</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">load</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">FileInputStream</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">src</span><span style=\"color: #BABED8\">\\\\</span><span style=\"color: #C3E88D\">druid.properties</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//4. 创建一个指定参数的数据库连接池, Druid连接池</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">DataSource</span><span style=\"color: #BABED8\"> dataSource </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> DruidDataSourceFactory</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">createDataSource</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">properties</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">long</span><span style=\"color: #BABED8\"> start </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentTimeMillis</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5000</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//获取连接</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> dataSource</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//System.out.println(&quot;连接成功&quot;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">long</span><span style=\"color: #BABED8\"> end </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentTimeMillis</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Druid连接池的耗时: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">end </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> start</span><span style=\"color: #89DDFF\">));</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//Druid连接池的耗时: 603</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><hr>\n<h3 id=\"Apache-DBUtils\"><a href=\"#Apache-DBUtils\" class=\"headerlink\" title=\"Apache-DBUtils\"></a><strong>Apache-DBUtils</strong></h3><h4 id=\"1-问题提出\"><a href=\"#1-问题提出\" class=\"headerlink\" title=\"1.问题提出:\"></a>1.问题提出:</h4><p>1、关闭connection后，resultSet结果集无法使用</p>\n<p>2、resultSet不利于数据的管理</p>\n<p>3、示意图 </p>\n<p>因此将结果集记录封装到ArrayList&lt;&gt;集合中方便数据的管理和使用</p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0Apache-DBUtils1.png\"></p>\n<h4 id=\"2-基本介绍\"><a href=\"#2-基本介绍\" class=\"headerlink\" title=\"2.基本介绍\"></a>2.基本介绍</h4><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0Apache-DBUtils2.png\"></p>\n<h4 id=\"3-准备工作\"><a href=\"#3-准备工作\" class=\"headerlink\" title=\"3.准备工作\"></a>3.准备工作</h4><p>略: 引入commons-dbutils-1.3.jar包到libs目录下并添加到库中</p>\n<h4 id=\"4-代码实现\"><a href=\"#4-代码实现\" class=\"headerlink\" title=\"4.代码实现\"></a>4.代码实现</h4><p>​\t<strong>(要确保mysql中设置的类型和Actor类中对象类型保持一致,否则会报错)</strong></p>\n<h5 id=\"1、查询多行记录-返回ArrayList集合\"><a href=\"#1、查询多行记录-返回ArrayList集合\" class=\"headerlink\" title=\"1、查询多行记录(返回ArrayList集合)\"></a>1、查询多行记录(返回ArrayList集合)</h5><p>​\t\t<strong>使用的是new BeanListHandler&lt;&gt;(Actor.class)</strong></p>\n<p>​\t\t解读queryRunner.query</p>\n<p>(1) query方法就是执行一个sql语句得到一个resultset –封装到 –&gt; ArrayList集合中<br>(2) 返回集合<br>(3) connection: 连接<br>(4) sql: 执行的sql语句<br>(5) new BeanListHandler&lt;&gt;(Actor.class): 将resultset -取出-&gt; Actor对象 -封装-&gt; ArraryList集合.底层使用反射机制 去获取Actor类的属性,然后封装<br>(6) 1: 就是给sql中的?赋值,可以有多个值(例如1,2,3) 因为是可变参数Object… params<br>(7) 底层得到的resultset,会在query方法关闭,还会关闭PreparedStatement</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//使用apache-DBUtils工具类 + druid完成对表的crud操作</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testQueryMany</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws SQLException </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//返回结果是多行的情况</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 得到连接(druid)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 使用DBUtils类和接口,先引入DBUtils相关的jar文件,加入到本Project</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 创建QueryRunner</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">QueryRunner</span><span style=\"color: #BABED8\"> queryRunner </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">QueryRunner</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//4. 就可以执行相关的方法,返回ArrayList 结果集</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">select * from actor where id &gt;= 1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//解读:</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//(1) query方法就是执行一个sql语句得到一个resultset --封装到 --&gt; ArrayList集合中</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//(2) 返回集合</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//(3) connection: 连接</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//(4) sql: 执行的sql语句</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//(5) new BeanListHandler&lt;&gt;(Actor.class): 将resultset -取出-&gt; Actor对象 -封装-&gt; ArraryList集合</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//    底层使用反射机制 去获取Actor类的属性,然后封装</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//(6) 1: 就是给sql中的?赋值,可以有多个值(例如1,2,3) 因为是可变参数Object... params</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//(7) 底层得到的resultset,会在query方法关闭,还会关闭PreparedStatement</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">List</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">Actor</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> list </span><span style=\"color: #89DDFF\">=</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            queryRunner</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">query</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">connection</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">BeanListHandler</span><span style=\"color: #89DDFF\">&lt;&gt;(</span><span style=\"color: #BABED8\">Actor</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">class</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//迭代器遍历</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">输出集合的信息</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Actor</span><span style=\"color: #BABED8\"> actor </span><span style=\"color: #89DDFF; font-style: italic\">:</span><span style=\"color: #BABED8\"> list</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">actor</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//释放资源</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>​\t\t输出结果</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">输出集合的信息</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">Actor&#123;id=1, name=&#39;蘑菇&#39;, sex=&#39;男&#39;, borndate=1970-11-11, phone=&#39;110&#39;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">Actor&#123;id=2, name=&#39;刘德华&#39;, sex=&#39;男&#39;, borndate=1970-11-11, phone=&#39;110&#39;&#125;</span></span></code></pre></div><h5 id=\"2、查询单行记录-返回单个对象\"><a href=\"#2、查询单行记录-返回单个对象\" class=\"headerlink\" title=\"2、查询单行记录(返回单个对象)\"></a><strong>2、查询单行记录</strong>(返回单个对象)</h5><p>​\t\t<strong>使用的是new BeanHandler&lt;&gt;(Actor.class)</strong> </p>\n<p>​\t\t如果没有查到的话，输出actor返回的是 null</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//演示apache-dbutils + druid 完成 返回的结果是单行记录(单个对象)</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testQuerySingle</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws SQLException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 得到连接(druid)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 使用DBUtils类和接口,先引入DBUtils相关的jar文件,加入到本Project</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 创建QueryRunner</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">QueryRunner</span><span style=\"color: #BABED8\"> queryRunner </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">QueryRunner</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//4. 执行相关方法,返回单个对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">select * from actor where id = ?</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//解读:</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//因为返回的是单行记录&lt;--&gt;单个对象, 使用的是Handler 是BeanHandler</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Actor</span><span style=\"color: #BABED8\"> actor </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> queryRunner</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">query</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">connection</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">BeanHandler</span><span style=\"color: #89DDFF\">&lt;&gt;(</span><span style=\"color: #BABED8\">Actor</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">class</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">actor</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//释放资源</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>​\t\t输出结果</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">Actor&#123;id=1, name=&#39;蘑菇&#39;, sex=&#39;男&#39;, borndate=1970-11-11, phone=&#39;110&#39;&#125;</span></span></code></pre></div><h5 id=\"3、查询单行单列-返回Object\"><a href=\"#3、查询单行单列-返回Object\" class=\"headerlink\" title=\"3、查询单行单列(返回Object)\"></a>3、查询单行单列(返回Object)</h5><p>​\t\t<strong>使用的是new ScalarHandler()</strong>\t输出结果:略</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//演示apache-dbutils + druid 完成查询结果是单行单列-返回的是object</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testScalar</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws SQLException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 得到连接(druid)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 使用DBUtils类和接口,先引入DBUtils相关的jar文件,加入到本Project</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 创建QueryRunner</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">QueryRunner</span><span style=\"color: #BABED8\"> queryRunner </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">QueryRunner</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//4. 执行相关方法,返回单行单列,返回的是object</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">select name from actor where id = ?</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//解读: 因为返回的是一个对象, 使用的handler 是 ScalarHandler</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Object</span><span style=\"color: #BABED8\"> object </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> queryRunner</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">query</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">connection</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">ScalarHandler</span><span style=\"color: #89DDFF\">(),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">object</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//释放资源</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"4、DML语句操作\"><a href=\"#4、DML语句操作\" class=\"headerlink\" title=\"4、DML语句操作\"></a>4、DML语句操作</h5><p>​\t\t<strong>使用的是queryRunner.update()</strong></p>\n<p>​\t\t<strong>注意事项: “小明”, 1 是用来替换 sql 中的 ?</strong> </p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">//演示apache-dbutils + druid 完成 dml (update, insert, delete)</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testDML</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> throws SQLException </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 得到连接(druid)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 使用DBUtils类和接口,先引入DBUtils相关的jar文件,加入到本Project</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//3. 创建QueryRunner</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">QueryRunner</span><span style=\"color: #BABED8\"> queryRunner </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">QueryRunner</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//4. 这里组织sql 完成 updatae, insert, delete(此处只演示update)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sql </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">update actor set name = ? where id = ?</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//解读:</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//(1) 执行dml 操作是queryRunner.update()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//(2) 返回的值是受影响的行数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> affectedRow </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> queryRunner</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">update</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">connection</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">小明</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">affectedRow </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">?</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行sql没有影响到表</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//释放资源</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><hr>\n<h3 id=\"表和JavaBean类型的映射关系\"><a href=\"#表和JavaBean类型的映射关系\" class=\"headerlink\" title=\"表和JavaBean类型的映射关系\"></a><strong>表和JavaBean类型的映射关系</strong></h3><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E8%A1%A8%E5%92%8CJavaBean%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB.png\"></p>\n<hr>\n<h3 id=\"BasicDao\"><a href=\"#BasicDao\" class=\"headerlink\" title=\"BasicDao\"></a>BasicDao</h3><p><strong>DAO和增删改查的通用方法-BasicDao</strong></p>\n<h4 id=\"1-问题提出-1\"><a href=\"#1-问题提出-1\" class=\"headerlink\" title=\"1.问题提出\"></a>1.问题提出</h4><p>apache-dbutils+Druid简化了JDBC开发，但还有不足:</p>\n<p>1、SQL语句是固定，不能通过参数传入，通用性不好，需要进行改进，更方便执行增删改查。</p>\n<p>2、对应select操作，如果有返回值，返回类型不能固定，需要使用泛型。</p>\n<p>3、将来的表很多，业务需求复杂，不可能只靠一个java类完成。</p>\n<p>4、引出&#x3D;》 BasicDAO</p>\n<h4 id=\"2-简单的BasicDAO示意图\"><a href=\"#2-简单的BasicDAO示意图\" class=\"headerlink\" title=\"2.简单的BasicDAO示意图\"></a>2.简单的BasicDAO示意图</h4><p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0BasicDao1.png\"></p>\n<p><img src=\"/../images/mysql/%E7%AB%A0%E8%8A%82JDBC%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0BasicDao2.png\"></p>\n<h4 id=\"3-基本说明\"><a href=\"#3-基本说明\" class=\"headerlink\" title=\"3.基本说明\"></a>3.基本说明</h4><p>1、DAO: data access object数据访问对象</p>\n<p>2、这样的通用类，称为BasicDao，是专门和数据库交互的，即完成对数据库(表)的crud操作。</p>\n<p>3、在BaiscDao的基础上，实现一张表对应一个Dao，更好的完成功能。(比如Cusromer表-下面是代码演示)</p>\n<h4 id=\"4-代码实现-1\"><a href=\"#4-代码实现-1\" class=\"headerlink\" title=\"4.代码实现\"></a>4.代码实现</h4><h5 id=\"1、简单设计\"><a href=\"#1、简单设计\" class=\"headerlink\" title=\"1、简单设计\"></a>1、简单设计</h5><p>1.com.dao_.utils &#x2F;&#x2F;工具类</p>\n<p>2.com.dao_.domain &#x2F;&#x2F;javabean</p>\n<p>3.com.dao_.dao &#x2F;&#x2F;存放XxxDAO 和BasicDAO</p>\n<p>4.com.dao_.test &#x2F;&#x2F;写测试类</p>\n<h5 id=\"2、utils包\"><a href=\"#2、utils包\" class=\"headerlink\" title=\"2、utils包\"></a>2、utils包</h5><p>​\t\t使用了druid数据库连接池</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F78C6C\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dao_</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">utils</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">alibaba</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">druid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">pool</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">DruidDataSourceFactory</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">javax</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">sql</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">DataSource</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">io</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">FileInputStream</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">sql</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">sql</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">ResultSet</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">sql</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">sql</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">Statement</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">util</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">Properties</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\"> * 基于druid数据库连接池的工具类</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">JDBCUtilsByDruid</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">DataSource</span><span style=\"color: #BABED8\"> ds</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//在静态代码块完成ds的初始化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Properties</span><span style=\"color: #BABED8\"> properties </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Properties</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            properties</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">load</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">FileInputStream</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">src</span><span style=\"color: #BABED8\">\\\\</span><span style=\"color: #C3E88D\">druid.properties</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            ds </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> DruidDataSourceFactory</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">createDataSource</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">properties</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Exception</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//编写getConnection方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">throws</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> ds</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//关闭连接  在数据库连接池中,close方法不是真正断掉连接</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">// 而是把使用的Connection对象放回连接池</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">static</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">ResultSet</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">resultSet</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Statement</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">statement</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">connection</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">resultSet </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                resultSet</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">statement </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                statement</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">connection </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                connection</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"3、domain包\"><a href=\"#3、domain包\" class=\"headerlink\" title=\"3、domain包\"></a>3、domain包</h5><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F78C6C\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dao_</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">domain</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">util</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">Date</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\"> * Actor对象和actor表的记录对应</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Actor</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//Javaben, POJO, Domain对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Integer</span><span style=\"color: #BABED8\"> id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> name</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> sex</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Date</span><span style=\"color: #BABED8\"> borndate</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> phone</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Actor</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//一定要给一个无参构造器[反射需要]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Actor</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Integer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">id</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">name</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">sex</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Date</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">borndate</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">phone</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">id </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> name</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">sex </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> sex</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">borndate </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> borndate</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">phone </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> phone</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Integer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getId</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">setId</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Integer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">id</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">id </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> id</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getName</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> name</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">setName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">name</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> name</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getSex</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> sex</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">setSex</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">sex</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">sex </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> sex</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Date</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getBorndate</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> borndate</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">setBorndate</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Date</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">borndate</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">borndate </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> borndate</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getPhone</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> phone</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">setPhone</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">phone</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #BABED8\">phone </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> phone</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">toString</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Actor&#123;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">id=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> id </span><span style=\"color: #89DDFF\">+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">, name=&#39;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">\\&#39;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">, sex=&#39;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> sex </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">\\&#39;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">, borndate=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> borndate </span><span style=\"color: #89DDFF\">+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">, phone=&#39;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> phone </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">\\&#39;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"4、dao包\"><a href=\"#4、dao包\" class=\"headerlink\" title=\"4、dao包\"></a>4、dao包</h5><p>注意: 每个方法中返回不同类型的值所调用的API不同</p>\n<p>​\t\t<strong>BasicDAO类: 是其他DAO的父类</strong> </p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F78C6C\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dao_</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dao</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">JDBC</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">utils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">org</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">apache</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">commons</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dbutils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">QueryRunner</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">org</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">apache</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">commons</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dbutils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">handlers</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">BeanHandler</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">org</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">apache</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">commons</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dbutils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">handlers</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">BeanListHandler</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">org</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">apache</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">commons</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dbutils</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">handlers</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">ScalarHandler</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">sql</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">sql</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">util</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">List</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\"> * 开发BasicDAO,是其他DAO的父类</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">BasicDAO</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">T</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//泛型指定具体类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">QueryRunner</span><span style=\"color: #BABED8\"> qr </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">QueryRunner</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//开发通用dml方法，针对任意的表</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">update</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Object</span><span style=\"color: #89DDFF\">...</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">parameters</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #464B5D; font-style: italic\">//sql语句， 参数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">            </span><span style=\"color: #464B5D; font-style: italic\">//返回受影响的行数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> update </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> qr</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">update</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">connection</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> parameters</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> update</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">finally</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//返回多个对象(即查询的结果是多行),针对任意表</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">    /**</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">     * </span><span style=\"color: #F78C6C; font-style: italic\">@param</span><span style=\"color: #464B5D; font-style: italic\"> </span><span style=\"color: #BABED8; font-style: italic\">sql</span><span style=\"color: #464B5D; font-style: italic\"> sql语句,可以有?</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">     * </span><span style=\"color: #F78C6C; font-style: italic\">@param</span><span style=\"color: #464B5D; font-style: italic\"> </span><span style=\"color: #BABED8; font-style: italic\">clazz</span><span style=\"color: #464B5D; font-style: italic\"> 传入一个类的Class对象,比如Actor.class</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">     * </span><span style=\"color: #F78C6C; font-style: italic\">@param</span><span style=\"color: #464B5D; font-style: italic\"> </span><span style=\"color: #BABED8; font-style: italic\">parameters</span><span style=\"color: #464B5D; font-style: italic\"> 传入?的具体的值,可以是多个</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">     * </span><span style=\"color: #F78C6C; font-style: italic\">@return</span><span style=\"color: #464B5D; font-style: italic\"> 根据Actor.class 返回对应的ArrayList集合</span></span>\n<span class=\"line\"><span style=\"color: #464B5D; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">List</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">T</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">queryMulti</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Class</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">T</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">clazz</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Object</span><span style=\"color: #89DDFF\">...</span><span style=\"color: #BABED8; font-style: italic\">parameters</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> qr</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">query</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">connection</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">BeanListHandler</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">T</span><span style=\"color: #89DDFF\">&gt;(</span><span style=\"color: #BABED8\">clazz</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> parameters</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">finally</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//查询单行结果的通用方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">T</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">querySingle</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Class</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">T</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">clazz</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Object</span><span style=\"color: #89DDFF\">...</span><span style=\"color: #BABED8; font-style: italic\">paramenters</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> qr</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">query</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">connection</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">BeanHandler</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">T</span><span style=\"color: #89DDFF\">&gt;(</span><span style=\"color: #BABED8\">clazz</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> paramenters</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">finally</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//查询单行单列的方法,即返回单值的方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Object</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">queryScaler</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Object</span><span style=\"color: #89DDFF\">...</span><span style=\"color: #BABED8; font-style: italic\">paramenters</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Connection</span><span style=\"color: #BABED8\"> connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            connection </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getConnection</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> qr</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">query</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">connection</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sql</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">ScalarHandler</span><span style=\"color: #89DDFF\">(),</span><span style=\"color: #BABED8\"> paramenters</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">SQLException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">finally</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            JDBCUtilsByDruid</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(null,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">null,</span><span style=\"color: #BABED8\"> connection</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>​\t\t<strong>ActorDAO类: 继承BasicDAO类</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F78C6C\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dao_</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dao</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dao_</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">domain</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">Actor</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">ActorDAO</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">extends</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">BasicDAO</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">Actor</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//1. 继承拥有BasicDAO的方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//2. 根据业务需要，可以编写特有的方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"5、testdao包\"><a href=\"#5、testdao包\" class=\"headerlink\" title=\"5、testdao包\"></a><strong>5、testdao包</strong></h5><p>在DAO包底层会自动把连接关闭 JDBCUtilsByDruid.close(null, null, connection);</p>\n<p>​\t\t<strong>TestDAO类: 演示如何使用ActorDAO对actor表进行crud操作</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-ocean\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F78C6C\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dao_</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">test</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dao_</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dao</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">ActorDAO</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">com</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">dao_</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">domain</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">Actor</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">org</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">junit</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">jupiter</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">api</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">Test</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">java</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">util</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">List</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">TestDAO</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Test</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #464B5D; font-style: italic\">//测试ActorDAO 对actor表的crud操作</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testActorDAO</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">ActorDAO</span><span style=\"color: #BABED8\"> actorDAO </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">ActorDAO</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//1. 查询</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">List</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">Actor</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> actors </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> actorDAO</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">queryMulti</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">select * from actor where id &gt;= ?</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> Actor</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">class</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">==查询结果==</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Actor</span><span style=\"color: #BABED8\"> actor </span><span style=\"color: #89DDFF; font-style: italic\">:</span><span style=\"color: #BABED8\"> actors</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">actor</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//2. 查询单行记录</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Actor</span><span style=\"color: #BABED8\"> actor </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> actorDAO</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">querySingle</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">select * from actor where id = ?</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> Actor</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">class</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">==查询单行结果==</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">actor</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//3. 查询单行单列</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Object</span><span style=\"color: #BABED8\"> object </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> actorDAO</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">queryScaler</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">select name from actor where id = ?</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">==查询单行单列结果==</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">object</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #464B5D; font-style: italic\">//4. dml操作 insert,update, delete</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> update </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> actorDAO</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">update</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">insert into actor values(null, ?, ?, ?, ?)</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">张飞</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">男</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">2000-11-11</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">9999</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">update </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">?</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行没有影响表</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div>","feature":true,"text":"Mysql学习笔记一、Mysql简要说明使用命令行窗口连接 MYSQL 数据库 操作示意图 二、创建数据库txt\\#使用指令创建数据库 CREATE DATAB...","permalink":"/post/Mysql章节JDBC和数据库连接池","photos":[],"count_time":{"symbolsCount":"39k","symbolsTime":"36 mins."},"categories":[{"name":"Mysql","slug":"Mysql","count":2,"path":"api/categories/Mysql.json"}],"tags":[{"name":"Mysql","slug":"Mysql","count":2,"path":"api/tags/Mysql.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0\"><span class=\"toc-text\">Mysql学习笔记</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81Mysql%E7%AE%80%E8%A6%81%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">一、Mysql简要说明</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">二、创建数据库</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%AB%A0%E8%8A%82-JDBC-%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0\"><span class=\"toc-text\">章节: JDBC 和数据库连接池</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81JDBC-%E8%BF%9E%E6%8E%A5-MySQL%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\"><span class=\"toc-text\">一、JDBC 连接 MySQL准备工作</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E4%BB%8B%E7%BB%8DJDBC\"><span class=\"toc-text\">二、介绍JDBC</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81JDBC-%E7%9A%84%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">1、JDBC 的概念</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81JDBC-%E7%9A%84%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">2、JDBC 的功能</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3%E3%80%81JDBC-%E7%9A%84%E5%B8%B8%E7%94%A8%E6%8E%A5%E5%8F%A3%E5%92%8C%E7%B1%BB\"><span class=\"toc-text\">3、JDBC 的常用接口和类</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E8%BF%9E%E6%8E%A5-MySQL\"><span class=\"toc-text\">三、连接 MySQL</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E3%80%81%E6%B3%A8%E5%86%8C%E9%A9%B1%E5%8A%A8\"><span class=\"toc-text\">(1)、注册驱动</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E3%80%81%E8%8E%B7%E5%8F%96%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">(2)、获取连接</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E3%80%81%E8%8E%B7%E5%8F%96%E6%89%A7%E8%A1%8C%E8%80%85%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">(3)、获取执行者连接</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E3%80%81%E6%89%A7%E8%A1%8C-SQL-%E8%AF%AD%E5%8F%A5%EF%BC%8C%E5%B9%B6%E6%8E%A5%E5%8F%97%E7%BB%93%E6%9E%9C\"><span class=\"toc-text\">(4)、执行 SQL 语句，并接受结果</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-%E3%80%81%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%9C\"><span class=\"toc-text\">(5)、处理结果</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-%E3%80%81%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90\"><span class=\"toc-text\">(6)、释放资源</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%89%E9%80%9A%E8%BF%87%E4%B8%8D%E5%90%8C%E6%96%B9%E5%BC%8F%E8%BF%9E%E6%8E%A5mysql\"><span class=\"toc-text\">（重要）通过不同方式连接mysql</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A%E6%98%A0%E5%B0%84%E4%B9%8B%E5%90%8E%E8%BF%9E%E6%8E%A5mysql\"><span class=\"toc-text\">方式一：映射之后连接mysql</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9A%E9%80%9A%E8%BF%87%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%9D%A5%E8%BF%9E%E6%8E%A5mysql\"><span class=\"toc-text\">方式二：通过读取配置文件来连接mysql</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81ResultSet-%E7%BB%93%E6%9E%9C%E9%9B%86\"><span class=\"toc-text\">四、ResultSet[结果集]</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">1.基本介绍</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-ResultSet%E5%9B%BE%E5%83%8F%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">2.ResultSet图像说明</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-ResultSet%E5%BA%95%E5%B1%82\"><span class=\"toc-text\">3.ResultSet底层</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E4%BB%A3%E7%A0%81%E4%B8%BE%E4%BE%8B%E6%BC%94%E7%A4%BA\"><span class=\"toc-text\">4.代码举例演示</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%94%E3%80%81Statement%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">五、Statement接口</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-1\"><span class=\"toc-text\">1.基本介绍</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-sql%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">2.sql注入</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E4%BB%A3%E7%A0%81%E4%B8%BE%E4%BE%8B%E6%BC%94%E7%A4%BAsql%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">3.代码举例演示sql注入</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%AD%E3%80%81PreparedStatement%E6%8E%A5%E5%8F%A3-%E9%A2%84%E5%A4%84%E7%90%86\"><span class=\"toc-text\">六、PreparedStatement接口[预处理]</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-2\"><span class=\"toc-text\">1.基本介绍</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E9%A2%84%E5%A4%84%E7%90%86%E7%9A%84%E5%A5%BD%E5%A4%84\"><span class=\"toc-text\">2.预处理的好处</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E4%BB%A3%E7%A0%81%E4%B8%BE%E4%BE%8B%E6%BC%94%E7%A4%BA%E9%A2%84%E5%A4%84%E7%90%86\"><span class=\"toc-text\">3.代码举例演示预处理</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E6%BC%94%E7%A4%BA%E4%BD%BF%E7%94%A8DML%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">4.演示使用DML语句</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%83%E3%80%81%E4%BE%8B%E9%A2%98%E7%BB%83%E4%B9%A0\"><span class=\"toc-text\">七、例题练习</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E9%A2%98%E7%9B%AE%E8%A6%81%E6%B1%82\"><span class=\"toc-text\">1、题目要求</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90\"><span class=\"toc-text\">2、问题解析</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E4%BD%BF%E7%94%A8PreparedStatement%E6%B7%BB%E5%8A%A05%E6%9D%A1%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">2.使用PreparedStatement添加5条数据</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E4%BF%AE%E6%94%B9tom%E7%9A%84%E8%AE%B0%E5%BD%95-%E5%B0%86username%E6%94%B9%E6%88%90-king\"><span class=\"toc-text\">3.修改tom的记录, 将username改成 king</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-%E5%88%A0%E9%99%A4-%E4%B8%80%E6%9D%A1-%E8%AE%B0%E5%BD%95\"><span class=\"toc-text\">4.删除 一条 记录</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-%E6%9F%A5%E8%AF%A2%E5%85%A8%E9%83%A8%E8%AE%B0%E5%BD%95%EF%BC%8C%E5%B9%B6%E6%98%BE%E7%A4%BA%E5%9C%A8%E6%8E%A7%E5%88%B6%E5%8F%B0\"><span class=\"toc-text\">5.查询全部记录，并显示在控制台</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%AB%E3%80%81JDBC%E7%9A%84API%E5%B0%8F%E7%BB%93\"><span class=\"toc-text\">八、JDBC的API小结</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B9%9D%E3%80%81%E5%B0%81%E8%A3%85-JDBC-%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5-%E5%BE%97%E5%88%B0%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">九、封装 JDBC[关闭连接,得到连接]</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%B0%81%E8%A3%85JDBCUtils-%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5-%E5%BE%97%E5%88%B0%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">1.封装JDBCUtils[关闭连接, 得到连接]</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E6%BC%94%E7%A4%BA%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8JDBCUtils%E7%B1%BB\"><span class=\"toc-text\">2.演示如何使用JDBCUtils类</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1%E3%80%81%E4%BD%BF%E7%94%A8JDBCUtils%E6%89%A7%E8%A1%8CDML%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">1、使用JDBCUtils执行DML语句</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2%E3%80%81%E4%BD%BF%E7%94%A8JDBCUtils%E6%89%A7%E8%A1%8Cselect%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">2、使用JDBCUtils执行select语句</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8D%81%E3%80%81%E4%BA%8B%E5%8A%A1\"><span class=\"toc-text\">十、事务</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E7%AE%80%E8%A6%81%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">1.简要说明</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B-%E6%A8%A1%E6%8B%9F%E7%BB%8F%E5%85%B8%E7%9A%84%E8%BD%AC%E8%B4%A6%E4%B8%9A%E5%8A%A1\"><span class=\"toc-text\">2.应用实例: 模拟经典的转账业务</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">1.模拟数据库</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E4%B8%8D%E4%BD%BF%E7%94%A8%E4%BA%8B%E5%8A%A1%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98%E6%A8%A1%E6%8B%9F\"><span class=\"toc-text\">2.不使用事务可能出现的问题模拟</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E4%BD%BF%E7%94%A8%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E4%B8%8A%E8%BF%B0%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">3.使用事务解决上述问题</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8D%81%E4%B8%80%E3%80%81%E6%89%B9%E5%A4%84%E7%90%86\"><span class=\"toc-text\">十一、批处理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-3\"><span class=\"toc-text\">1.基本介绍</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E6%89%B9%E5%A4%84%E7%90%86%E5%BA%95%E5%B1%82\"><span class=\"toc-text\">2.批处理底层</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90\"><span class=\"toc-text\">3.源码分析</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E4%BD%BF%E7%94%A8%E6%89%B9%E5%A4%84%E7%90%86\"><span class=\"toc-text\">4.使用批处理</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8D%81%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0\"><span class=\"toc-text\">十二、数据库连接池</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E6%8F%90%E5%87%BA%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">1.提出问题</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E4%BC%A0%E7%BB%9F%E8%8E%B7%E5%8F%96Connection%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90\"><span class=\"toc-text\">2.传统获取Connection问题分析</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">3.数据库连接池基本介绍</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%A4%BA%E6%84%8F%E5%9B%BE\"><span class=\"toc-text\">4.数据库连接池示意图</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%9A%84%E7%A7%8D%E7%B1%BB\"><span class=\"toc-text\">5.数据库连接池的种类</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#C3P0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0\"><span class=\"toc-text\">C3P0数据库连接池</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E4%BD%BF%E7%94%A8C3P0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%9A%84%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\"><span class=\"toc-text\">1.使用C3P0数据库连接池的准备工作</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E4%BD%BF%E7%94%A8C3P0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">2.使用C3P0数据库连接池(代码实现)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%96%B9%E5%BC%8F%E4%B8%80-%E5%9C%A8%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%8C%87%E5%AE%9Auser-url-password%E7%AD%89\"><span class=\"toc-text\">方式一: 在程序中指定user, url, password等</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%96%B9%E5%BC%8F%E4%BA%8C-%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A8%A1%E6%9D%BF%E6%9D%A5%E5%AE%8C%E6%88%90\"><span class=\"toc-text\">方式二: 使用配置文件模板来完成</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Druid-%E5%BE%B7%E9%B2%81%E4%BC%8A-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0\"><span class=\"toc-text\">Druid(德鲁伊)数据库连接池</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E4%BD%BF%E7%94%A8Druid%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%9A%84%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\"><span class=\"toc-text\">1.使用Druid数据库连接池的准备工作</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E4%BD%BF%E7%94%A8Druid%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">2.使用Druid数据库连接池(代码实现)</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Apache-DBUtils\"><span class=\"toc-text\">Apache-DBUtils</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E9%97%AE%E9%A2%98%E6%8F%90%E5%87%BA\"><span class=\"toc-text\">1.问题提出:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">2.基本介绍</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\"><span class=\"toc-text\">3.准备工作</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">4.代码实现</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1%E3%80%81%E6%9F%A5%E8%AF%A2%E5%A4%9A%E8%A1%8C%E8%AE%B0%E5%BD%95-%E8%BF%94%E5%9B%9EArrayList%E9%9B%86%E5%90%88\"><span class=\"toc-text\">1、查询多行记录(返回ArrayList集合)</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#2%E3%80%81%E6%9F%A5%E8%AF%A2%E5%8D%95%E8%A1%8C%E8%AE%B0%E5%BD%95-%E8%BF%94%E5%9B%9E%E5%8D%95%E4%B8%AA%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">2、查询单行记录(返回单个对象)</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3%E3%80%81%E6%9F%A5%E8%AF%A2%E5%8D%95%E8%A1%8C%E5%8D%95%E5%88%97-%E8%BF%94%E5%9B%9EObject\"><span class=\"toc-text\">3、查询单行单列(返回Object)</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4%E3%80%81DML%E8%AF%AD%E5%8F%A5%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">4、DML语句操作</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A1%A8%E5%92%8CJavaBean%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB\"><span class=\"toc-text\">表和JavaBean类型的映射关系</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#BasicDao\"><span class=\"toc-text\">BasicDao</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E9%97%AE%E9%A2%98%E6%8F%90%E5%87%BA-1\"><span class=\"toc-text\">1.问题提出</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E7%AE%80%E5%8D%95%E7%9A%84BasicDAO%E7%A4%BA%E6%84%8F%E5%9B%BE\"><span class=\"toc-text\">2.简单的BasicDAO示意图</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E5%9F%BA%E6%9C%AC%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">3.基本说明</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1\"><span class=\"toc-text\">4.代码实现</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1%E3%80%81%E7%AE%80%E5%8D%95%E8%AE%BE%E8%AE%A1\"><span class=\"toc-text\">1、简单设计</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#2%E3%80%81utils%E5%8C%85\"><span class=\"toc-text\">2、utils包</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3%E3%80%81domain%E5%8C%85\"><span class=\"toc-text\">3、domain包</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4%E3%80%81dao%E5%8C%85\"><span class=\"toc-text\">4、dao包</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5%E3%80%81testdao%E5%8C%85\"><span class=\"toc-text\">5、testdao包</span></a></li></ol></li></ol></li></ol></li></ol></li></ol>","author":{"name":"白","slug":"blog-author","avatar":"../images/头像.png","link":"/","description":"有些事不是看到了希望才去坚持，而是因为坚持才会看到希望。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"满汉楼小作业","uid":"9828133175dbd4abfb8bc2b5ec3d15b8","slug":"Mysql章节满汉楼项目","date":"2023-11-24T16:25:00.000Z","updated":"2023-11-25T17:22:17.895Z","comments":true,"path":"api/articles/Mysql章节满汉楼项目.json","keywords":null,"cover":"../images/封面/满汉楼项目.jpg","text":"Mysql满汉楼小作业简要说明技术要求: java + jdbc(druid) + mysql 项目目标: 训练对mysql和jdbc的能力 1、去掉界面和事件...","permalink":"/post/Mysql章节满汉楼项目","photos":[],"count_time":{"symbolsCount":"24k","symbolsTime":"21 mins."},"categories":[{"name":"Mysql","slug":"Mysql","count":2,"path":"api/categories/Mysql.json"}],"tags":[{"name":"Mysql","slug":"Mysql","count":2,"path":"api/tags/Mysql.json"}],"author":{"name":"白","slug":"blog-author","avatar":"../images/头像.png","link":"/","description":"有些事不是看到了希望才去坚持，而是因为坚持才会看到希望。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"Hello World","uid":"b9663f58f18133b35bfe243f3e916a80","slug":"hello-world","date":"2023-11-21T11:10:22.100Z","updated":"2023-11-22T15:12:20.770Z","comments":true,"path":"api/articles/hello-world.json","keywords":null,"cover":[],"text":"Welcome to Hexo! This is your very first post. Check documentation for more info...","permalink":"/post/hello-world","photos":[],"count_time":{"symbolsCount":449,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"白","slug":"blog-author","avatar":"../images/头像.png","link":"/","description":"有些事不是看到了希望才去坚持，而是因为坚持才会看到希望。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}